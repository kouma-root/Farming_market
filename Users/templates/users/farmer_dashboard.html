{% extends 'base.html' %}
{% block content %}
<div class="dashboard">
    <aside class="dashboard-sidebar">
        <h2>Welcome, {{ user.username }}</h2>
        <p>Email: {{ user.email }}</p>
        <p>Role: {{ user.role }}</p>
        <p>Phone Number: {{ user.phone_number }}</p>
        <p>Created at: {{ user.date_joined }}</p>
        <p>Location: {{ user.location }}</p>
    </aside>
    <section class="dashboard-main">
        <div class="stats-panel">
            <div class="stats-card">
                <div class="stat-title">Total Products</div>
                <div class="stat-value">{{ stats.total_products }}</div>
            </div>
            <div class="stats-card">
                <div class="stat-title">Total Requests</div>
                <div class="stat-value">{{ stats.total_requests }}</div>
            </div>
            <div class="stats-card">
                <div class="stat-title">Pending</div>
                <div class="stat-value">{{ stats.pending_requests }}</div>
            </div>
            <div class="stats-card">
                <div class="stat-title">Approved</div>
                <div class="stat-value">{{ stats.approved_requests }}</div>
            </div>
            <div class="stats-card">
                <div class="stat-title">Rejected</div>
                <div class="stat-value">{{ stats.rejected_requests }}</div>
            </div>
            <div class="stats-card">
                <div class="stat-title">Cancelled</div>
                <div class="stat-value">{{ stats.cancelled_requests }}</div>
            </div>
        </div>

        <h3>Your Products</h3>
        <table>
            <tr>
                <th>Name</th>
                <th>Quantity</th>
                <th>Status</th>
                <th>Created At</th>
            </tr>
            {% for product in products %}
            <tr>
                <td>{{ product.name }}</td>
                <td>{{ product.quantity }}</td>
                <td>{{ product.status }}</td>
                <td>{{ product.created_at }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4">No products found.</td>
            </tr>
            {% endfor %}
        </table>

        <h3>Recent Requests</h3>
        <table>
            <tr>
                <th>Buyer</th>
                <th>Product</th>
                <th>Quantity</th>
                <th>Status</th>
            </tr>
            {% for req in requests|slice:":5" %}
            <tr>
                <td>{{ req.buyer.username }}</td>
                <td>{{ req.product.name }}</td>
                <td>{{ req.quantity }}</td>
                <td>{{ req.status }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4">No requests found.</td>
            </tr>
            {% endfor %}
        </table>
    </section>
</div>

{% endblock %}