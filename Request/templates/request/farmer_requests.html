
{% extends 'base.html' %}

{% block content %}

<h2>Requests for Your Products</h2>
<table>
    <tr>
        <th>Product</th>
        <th>Buyer</th>
        <th>Status</th>
        <th>Last Updated</th>
        <th>Actions</th>
    </tr>
    {% for req in requests %}
    <tr>
        <td>{{ req.product.name }}</td>
        <td>{{ req.buyer.username }}</td>
        <td>{{ req.status }}</td>
        <td>{{ req.updated_at|date:"Y-m-d H:i" }}</td>
        <td>
            {% if req.status == "Pending" or req.status == "Cancelled" %}
                <a href="{% url 'update_request_status' req.id 'Approved' %}">Approve</a>
                <a href="{% url 'update_request_status' req.id 'Rejected' %}">Reject</a>
            {% endif %}
            {% if req.status == "Approved" or req.status == "Rejected" %}
                <a href="{% url 'cancel_request' req.id %}">Cancel</a>
            {% endif %}
        </td>
    </tr>
    {% endfor %}
</table>

{% endblock %}